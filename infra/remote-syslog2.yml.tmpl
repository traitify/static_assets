files:
  - path: {{ template "GET_VALUE" "infra/apache/error_log" }}
    tag: {{ env "APP_NAME" }}:alloc:{{ printf "%0.8s" (env "NOMAD_ALLOC_ID") }}:git:{{ printf "%0.8s" (env "GIT_HASH") }}:{{ env "NOMAD_GROUP_NAME" }}:error
  - path: {{ template "GET_VALUE" "infra/apache/access_log" }}
    tag: {{ env "APP_NAME" }}:alloc:{{ printf "%0.8s" (env "NOMAD_ALLOC_ID") }}:git:{{ printf "%0.8s" (env "GIT_HASH") }}:{{ env "NOMAD_GROUP_NAME" }}:access
  - path: /alloc/logs/{{ env "LOG_TASK_NAME" }}.stdout.*
    tag: {{ env "APP_NAME" }}:alloc:{{ printf "%0.8s" (env "NOMAD_ALLOC_ID") }}:git:{{ printf "%0.8s" (env "GIT_HASH") }}:{{ env "NOMAD_GROUP_NAME" }}:stdout
  - path: /alloc/logs/{{ env "LOG_TASK_NAME" }}.stderr.*
    tag: {{ env "APP_NAME" }}:alloc:{{ printf "%0.8s" (env "NOMAD_ALLOC_ID") }}:git:{{ printf "%0.8s" (env "GIT_HASH") }}:{{ env "NOMAD_GROUP_NAME" }}:stderr
hostname: {{ env "LOCAL_HOSTNAME" }}
exclude_patterns: {{ template "GET_VALUE" "infra/remote_syslog/exclude_patterns" }}
destination:
  host: localhost
  port: 514
  protocol: tcp
facility: local7
severity: info
new_file_check_interval: "1" # Check every 1 seconds
